<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset='utf-8' />
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible' />
  <title>timmy willison</title>
  <meta content="timmy willison's personal website and blog" name='description' />
  <meta content='timmy willison personal website blog jquery tim jQuery core portfolio javascript html css html5 css3' name='keywords' />
  <meta content='timmy willison' name='author' />
  <!--[if IE]>
    <meta content='no' http-equiv='imagetoolbar' />
  <![endif]-->
  <link href='/favicon.ico' rel='shortcut icon' />
  <link href='/apple-touch-icon.png' rel='apple-touch-icon' />
  <link href='/css/style.css?v=2' rel='stylesheet' />
  <script src='/js/libs/modernizr-1.6.min.js'></script>
</head>
<body>
  <header id='header'>
      <hgroup>
        <a href='/' id='logo'>timmy willison</a>
        <h2>Web developer, <a target="_blank" href="http://jquery.com/">jQuery</a> Core Team Member, <br><a id="html5" href="http://www.w3.org/html/logo/">html5</a>/<a target="_blank" href="http://css3please.com/">css3</a> fanatic</h2>
        <nav class='start' id='nav'>
          <ul>
            <li>
              <a href='/samples/password123/'>jQuery password123</a>
            </li>
            <li>
              <a href='/samples/bubbles/'>jQuery Google Bubbles</a>
            </li>
            <li>
              <a href='/pres/operators/'>Rare Javascript Operators</a>
            </li>
            <li>
              <a href='http://twitter.com/timmywil'>@timmywil</a>
            </li>
            <li>
              <a href='http://github.com/timmywil'>Github</a>
            </li>
          </ul>
        </nav>
      </hgroup>
    </header>
  <div id='container'>
    <section id='home'>
        <img alt='HTML5 Logo' height='512' id='html5-logo' src='/images/html5-logo.png' width='454' />
      </section>
      <section id='blog'>
        <article>
          <header class='clearfix'>
            <h1>
              Gradients plus border-radius in IE9
            </h1>
            <h5 class='date'>
              6/21/2011
            </h5>
          </header>
          <div class='content'>
            <p>CSS3 is magical like unicorns.  I would say the horn of the unicorn is its ability to be replicated by some of the filters in IE.  The horn is majestic, but painful when applied to sensitive areas.  Filters in IE give us a way to replicate some of the power of css3 without javascript and without images.  However, filters come with their own problems.  The most common problem is probably the equivalent of <code>overflow: hidden</code> whenever a filter is applied in IE6-7.  Another, is mixing a gradient filter with border-radius in IE9.</p>
            
            <p>IE9 is a major improvement compared to its predecessors, but does not yet support css3 gradients.  It does, however, support border-radius.  A problem arises when you apply a filter to an element with border-radius.  The filter overrides the border-radius and you lose your rounded corners.  You should probably think of a filter as a commanding predator.  It will do stuff, but it will take over and kill puppies.</p>
            
            <p>Another workaround is to use <a href="http://abouthalf.com/2010/10/25/internet-explorer-9-gradients-with-rounded-corners/">SVG</a> to create a gradient background image.  This has the advantage of being supported in IE9 and the css is not too long or difficult. SVG does have more flexibility compared to a static image created in photoshop, but they take time to create.  So, for those on the go, we may have a quicker solution that does not require any extra files.</p>
            
            <blockquote><p>When in doubt, <strong>add a wrapper</strong>.</p></blockquote>
            
            <iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/timmywil/epgpX/embedded/result,css,html"></iframe>
            
            
            <p>You can fix the IE9 problem by simply wrapping your gradient and given that the border-radius instead and applying <code>overflow: hidden</code>.  The overflow: hidden is present in IE6-7 due to the filter as stated previously, but will still only be applied in those 3 browsers in the given example.  If you have a dropdown or need some equivalent behavior where overflow is needed, the best solution may be to have another div outside of the wrapper, but absolutely positioned on top of it.  Border-radius will still not work in IE6-8, but if you care about that, you'll need to look into javascript fallbacks or using images.</p>
            
            <p>If you look at the HTML, you'll notice I've added an IE conditional comment for the wrapper.  I only did it that way to make the fiddle.  I recommend using Paul Irish's <a href="http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/">IE Conditional Comments</a>, a conditional stylesheet, or css hacks if absolutely necessary.</p>
            
            <p><em>Tip: <code>position:relative</code> or <code>absolute</code> will cause problems when combining overflow and border-radius, so best stick with <code>static</code> and use something like the wrapper div in the example for positioning relatively or absolutely.</em></p>
            
            <p><em>Update: The original solution did not clip correctly in Opera. This post has since been updated. Let me know if you see any more problems!</em></p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              When to use <code>.attr()</code> and <code>.prop()</code>
            </h1>
            <h5 class='date'>
              5/9/2011
            </h5>
          </header>
          <div class='content'>
            <p>Below is basically a copy of the jQuery blog post, but with a few additions. Feel free to ask me any questions.</p>
            <h2>Upgrading</h2>
            <p>With the introduction of the new <code>.prop()</code> method and the changes to the <code>.attr()</code> method, jQuery 1.6 sparked a discussion about the difference between attributes and properties and how they relate to each other. It also came with some backwards compatibility issues that have been fixed in 1.6.1. When updating from 1.5.2 to 1.6.1, you should not have to change any attribute code.</p>
            <p>Below is a description of the changes to the Attributes module in jQuery 1.6 and 1.6.1, as well as the <i>preferred</i> usage of the <code>.attr()</code> method and the <code>.prop()</code> method. However, as previously stated, jQuery 1.6.1 will allow you to use .attr() just as it was used before in all situations.</p>
            <h2>Changes</h2>
            <p>The changes to the Attributes module removed the ambiguity between attributes and properties, but caused some confusion in the jQuery community, since all versions of jQuery prior to 1.6 have handled attributes and properties in one method(<code>.attr()</code>).  The old <code>.attr()</code> method had many bugs and was hard to maintain.</p>
            <p>The release of 1.6.1 comes with several bug fixes as well as an update to the Attributes module.</p>
            <p>Specifically, boolean attributes such as <strong>checked, selected, readonly, multiple, and disabled</strong> in 1.6.1 will be treated just as they used to be treated in jQuery versions prior to 1.6.  This means that code such as</p>
            <pre name="code" class="javascript">
            $(":checkbox").attr("checked", true);
            $("option").attr("selected", true);
            $("input").attr("readonly", true);
            $("select").attr("multiple", true);
            $("input").attr("disabled", true);
            </pre>
            <p>will not need to be changed in 1.6.1 in order to work as previously expected.</p>
            <p>To make the changes to <code>.attr()</code> clear, here are some examples of the use cases of <code>.attr()</code> that worked in previous versions of jQuery that should be switched to use <code>.prop()</code> instead:</p>
            <table class='table'>
              <tr>
                <th><code>.attr()</code></th>
                <th>Proper <code>.prop()</code> usage</th>
              </tr>
              <tr>
                <td>$(window).attr...</td>
                <td>$(window).prop...</td>
              </tr>
              <tr>
                <td>$(document).attr...</td>
                <td>$(document).prop...</td>
              </tr>
              <tr>
                <td>$(":checkbox").attr("checked", true);</td>
                <td>$(":checkbox").prop("checked", true);</td>
              </tr>
              <tr>
                <td>$("option").attr("selected", true);</td>
                <td>$("option").prop("selected", true);</td>
              </tr>
            </table>
            <p>First, using the <code>.attr()</code> method on the window or document did not work in jQuery 1.6 because the window and document cannot have attributes. They contain properties (such as location or readyState) that should be manipulated with <code>.prop()</code> or simply with raw javascript. In jQuery 1.6.1, the <code>.attr()</code> will defer to the <code>.prop()</code> method for both the window and document instead of throwing an error.</p>
            <p>Next, checked, selected, and other boolean attributes previously mentioned are receiving special treatment because of the special relationship between these attributes and their corresponding properties. Basically, an attribute is what you see in the html:</p>
            <pre name="code" class="javascript">
            &lt;input type="checkbox" checked="checked"&gt;
            </pre>
            <p>Boolean attributes such as checked only set the default or <i>initial</i> value. In the case of a checkbox, the checked attribute sets whether the checkbox should be checked when the page loads.</p>
            <p>Properties are what the browser uses to keep track of the <strong>current</strong> values.  These are retrievable and settable only with javascript.</p>
            <pre name="code" class="javascript">
            $(":checkbox").get(0).checked = true;
            // Is the same as $(":checkbox:first").prop("checked", true);
            </pre>
            <p>In jQuery 1.6, setting checked with</p>
            <pre name="code" class="javascript">
            $(":checkbox").attr("checked", true);
            </pre>
            <p>would not check the checkbox because it was the property that needed to be set.</p>
            <p>However, once jQuery 1.6 was released, the jQuery team understood that it was not particularly useful to set something that the browser was only concerned with on page load.  Therefore, in the interest of backwards compatibility, we will continue to be able to set these boolean attributes with the <code>.attr()</code> method in jQuery 1.6.1.</p>
            <p>The most common boolean attributes are <strong>checked, selected, disabled, and readOnly</strong>, but here is a full list of boolean properties compiled from the W3C specificiation:</p>
            <pre>autobuffer, autofocus, autoplay, async, checked, compact, controls, declare, defaultMuted, defaultSelected, defer, disabled, draggable, formNoValidate, hidden, indeterminate, isMap, itemscope, loop, multiple, muted, noHref, noResize, noShade, noWrap, noValidate, open, pubDate, readOnly, required, reversed, scoped, seamless, selected, spellcheck, trueSpeed, visible.</pre>
            <p>For various reasons, jQuery does not and cannot support setting all of these boolean properties and attributes with <code>.attr()</code>, but here is the list of the ones jQuery does support setting with <code>.attr()</code>.</p>
            <pre>autofocus, autoplay, async, checked, controls, defer, disabled, hidden, loop, multiple, open, readonly, required, scoped, selected</pre>
            <p>It is still recommended that <code>.prop()</code> be used when setting these boolean attributes/properties, but your code will not break in jQuery 1.6.1 even if these use cases are not switched to <code>.prop()</code>.</p>
            <p>Below is a list of some attributes and properties and which method should normally be used when getting or setting them. This is the <i>preferred</i> usage, but the .attr() method will work in all attribute cases.</p>
            <p>Note that some DOM Element properties are also listed below - but will only work with the new .prop() method.</p>
            <table class='table'>
              <tr>
                <th>Attribute/Property</th>
                <th><code>.attr()</code></th>
                <th><code>.prop()</code></th>
              </tr>
              <tr>
                <td>accesskey</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>align</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>async</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>autofocus</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>checked</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>class</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>contenteditable*</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>defaultValue</td>
                <td></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>draggable*</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>href</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>id</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>label</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>location**</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>multiple</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>name</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>nodeName</td>
                <td></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>nodeType</td>
                <td></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>readOnly</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>rel</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>selected</td>
                <td><span style="color:#aaa">&#10003</span></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>src</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>tabindex</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>tagName</td>
                <td></td>
                <td>&#10003;</td>
              </tr>
              <tr>
                <td>title</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>type</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
              <tr>
                <td>width***</td>
                <td>&#10003;</td>
                <td></td>
              </tr>
            </table>
            <p>
              * These are <i>enumerated attributes</i>. These are sometimes confused with boolean attributes, but their corresponding property values are of type <code>string</code>, not <code>boolean</code>.<br>
              ** i.e. window.location <br> *** If needed over <code>.width()</code>
            </p>
            <div class='note'>Neither <code>.attr()</code> or <code>.prop()</code> should be used for getting/setting <strong>value</strong>.  Use the <code>.val()</code> method instead.</div>
            <h3>Summary</h3>
            <p>The <code>.prop()</code> method should be used for boolean attributes/properties and for properties which do not exist in html (such as window.location).  All other attributes (ones you can see in the html) can and should continue to be manipulated with the <code>.attr()</code> method.</p>
            <p>One nice thing to keep in mind: you will have significantly improved performance regardless of which function you use. For boolean attributes, it's faster to use the <code>.prop()</code> method, but for other attributes, using <code>prop</code> will not give you much of a performance gain, nor will it have attribute hooks.</p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              A New jQuery.attr and the New jQuery.prop Method
            </h1>
            <h5 class='date'>
              4/18/2011
            </h5>
          </header>
          <div class='content'>
            <p>The rewrite of the internal method jQuery.attr and the addition of jQuery.prop will be released in the upcoming release of jQuery 1.6 (May 1). This comes with a solid <a target="_blank" href="http://jsperf.com/attr-vs-attrhooks">performance improvement</a>, a modularized implementation, and a cleaner way of dealing with attributes. However, this rewrite will confuse some people who have been using jQuery.fn.attr for cases for which it was not intended, but have always worked. It used to be a jumbled juxtaposition of concepts attempting to deal with two things in one method, which caused many bugs.</p>
            <p>First, we'll start with the difference between content attributes and IDL(Interface Definition Language) attributes. Once this distinction is understood, you will understand when to use attr and when to use prop.</p>
            <p>Let's take a look at some common use cases for jQuery.fn.attr</p>
            <pre name="code" class="javascript">
            $("div").attr("id", "timmy");  // OK
            $("video").attr("autofocus", true);  // OK
            $(window).attr... // NO
            $(document).attr...  // NO
            $("input").attr("value"); // DEPENDS
            $("input:checkbox").attr("checked"); // DEPENDS
            </pre>
            <p>The reason it makes no sense to call attr on the document or the window is due to the fact that they cannot have content attributes.</p>
            <iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/timmywil/Caxw3/embedded/result%2Cjs"></iframe>
            <p>They are objects that contain IDL attributes( let's call them properties ), so getting or setting a content attribute with attr on these objects will not work anymore. Here are some examples of content attributes:</p>
            <pre name="code" class="javascript">
            &lt;input id=&quot;timmy1&quot; class=&quot;timmy&quot; name=&quot;timmy1&quot;
                onclick=&quot;javascript:void()&quot; type=&quot;radio&quot; value=&quot;one&quot; selected=&quot;selected&quot;&gt;
            </pre>
            <p>All of these content attributes have properties that they map to. For instance, if elem is the node above, setting id="timmy1" on that <code>&lt;input&gt;</code> will also set it's property: <code>elem.id</code>. Setting <code>class="timmy"</code> will set <code>elem.className</code>. However, not all attributes work this way and the annoying inconsistencies between browsers are mainly caused by the differences in the way they are mapped onto node objects. For instance, when retrieving any content attribute from a form in IE6 or IE7, multiple node objects are returned instead of a string or some commonly returned value and therefore require a special call. This is because form.action can not only map to the action attribute of that form, but it can also map to some input within the form that has a name="action" if it exists (even though you should NEVER do that). The main job attr performs is get and set the correct attributes consistently across browsers.</p>
            <p>Now, one issue that will come up and will have to be answered often in the bug tracker is how come <code>.attr("value")</code> or <code>.attr("checked")</code> or <code>.attr("selected")</code>don't work anymore? Well, actually they now work how they always should have worked. You see, in the <a href="http://www.w3.org/TR/html4/interact/forms.html#adef-value-INPUT" target="_blank">official specification</a> for these attributes, these attributes do not map to the properties that have the same name.  The value attribute does not map to the value property and the checked attribute does not map to the checked property, even though that's what attr gave you in the past. These attributes should only be used to set their <i>initial</i> values, or <i>default</i> versions of these properties such as <code>.defaultValue</code>. So, in the above code where I said "depends", I say this to make it clear that retrieving these attributes will not give you the element's <b>current</b> value. That is why it has always been recommended to use <code>.is(":checked")</code> when checking the checked property or <code>.val()</code> when retrieving values.</p>
            <h3>
              <i>jQuery.fn.prop</i>
            </h3>
            <p>If you find that attr is broken in your app, try switching it to this method.  This can be used to set properties on the window, document, plain objects, arrays, and all sorts of things.  It's really just a method for dot notation that has some fixes for cross-browser consistency. Normally, attr will still be the method of choice and you should keep in mind that attr is the preferred method for getting and setting content attributes.</p>
            <h3>
              <i>Boolean Attributes</i>
            </h3>
            <p>Finally, allow me to say a word about boolean attributes such as checked, selected, disabled, readOnly, and many html5 attributes that go on video or audio tags. Anyone who wants to set these attributes with javascript should know that the mere presence of these attributes on the DOM will be treated as if set to true. This means that even when you see <code>checked="false"</code> or <code>autofocus="false"</code>, these attributes can still be true in certain browsers. We account for some of the most common boolean attributes being set to false in jQuery, but to safely ensure you are setting all of your boolean attributes to false, <a href="http://api.jquery.com/removeAttr">remove them</a>.</p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              Ajax Updating With jQuery
            </h1>
            <h5 class='date'>
              4/17/2011
            </h5>
          </header>
          <div class='content'>
            <p>A common use case for ajax is the ajax updater. For simple updaters that do not handle large amounts of data, jQuery alone is sufficient in providing easy ajax updating.  Using an <a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">IIFE</a> (which is generally preferred over setInterval), we can write an updater that checks for changes from the server at some interval.</p>
            <iframe style="width: 100%; height: 200px" src="http://jsfiddle.net/timmywil/zppLq/embedded/js%2Cresult"></iframe>
            <p>The code above retrieves the homepage of <a href="http://jsfiddle.net">jsfiddle.net</a> and then retrieves all of the select elements. If you have something small on your page that needs to be updated periodically, this is probably the best way to go.  It would be easy enough to switch the use of load to any other jQuery ajax function.  For instance, loading JSON from twitter instead.</p>
            <p>The following example uses jsonp to retrieve json from twitter at a set interval from the public stream.</p>
            <div class='note'>
              There is a limit on the number of calls you can make to the public stream without authentication. If this stops working, don't be surprised, but every IP gets 150 requests per hour.
            </div>
            <iframe style="width: 100%; height: 500px" src="http://jsfiddle.net/timmywil/drFuW/embedded/js%2Cresult"></iframe>
            <p>So you can see how easy it is to update with ajax using an IIFE.  However, there are many things you may want to take into account if you are doing larger requests with lots of data.  You want to limit DOM manipulation in those cases and should check whether the data is exactly the same before appending it to the DOM.  There are ajax updater plugins that do just that (or check for a 304 cached data response), such as <a href="https://github.com/RobertFischer/JQuery-PeriodicalUpdater/">jQuery Periodical Updater</a>.</p>
            <p>Be good and have fun!</p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              The Typical Behavior of the <code>this</code> Keyword
            </h1>
            <h5 class='date'>
              3/5/2011
            </h5>
          </header>
          <div class='content'>
            <p>Brendan Eich, the father of Javascript, recently released a <a href="http://www.aminutewithbrendan.com/pages/20110303" target="_blank">podcast on the <code>this</code> keyword</a>. He discusses strict mode and perhaps a more proper definition of <code>this</code>.</p>
            <p>It can sometimes be difficult to remember what the <code>this</code> keyword is. For instance, as we all know, jQuery is an object(well actually a function but we'll get to that). Let's look at <code>this</code> within jQuery's event code. You do not need to understand the internals of jQuery events here.</p>
            <pre name="code" class="javascript">
            jQuery.Event = function( src ) {
              // Allow instantiation without the 'new' keyword
              if ( !this.preventDefault ) {
                return new jQuery.Event( src );
              }
              ...
            };
            </pre>
            <p>An important thing to understand when trying to understand <code>this</code> is the Javascript prototype. How is it that jQuery.Event can call itself and not go into an infinite loop?</p>
            <p>The first time you call <code>jQuery.Event( src )</code>, what you will get is an instantiation of jQuery.Event because <code>this</code> the first time is simply jQuery the function, not the instantiated object that the jQuery function returns that we are all used to dealing with.</p>
            <p>Given that, this.preventDefault is undefined. So it calls jQuery.Event() again, but this time with <a href="https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special/new">the new operator</a>, automatically instantiating an event. Therefore, in this call to jQuery.Event, <code>this</code> is now jQuery.Event with an attached prototype and all instance variables, <b>and that includes jQuery.Event.prototype.preventDefault</b>, which should now be simply referred to as this.preventDefault. Since this.preventDefault is no longer undefined, the code moves on.</p>
            <div class='note'>
              See the docs for <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/prototype">object prototypes in Javascript</a> and <a href="https://developer.mozilla.org/en/JavaScript/Strict_mode">strict mode</a>.
            </div>
            <p>Now, this is a clever way to ensure jQuery.Event is always instantiated, but maybe you can see how coders can sometimes get confused by what <code>this</code> is.</p>
            <p>The question Brendan asks, is what about functions that you write that are not actually methods on the window, but still have the this keyword equal to the global object. This seems inconsistent. This seems like trouble. Should it always default to window?</p>
            <div class='note'>
              Press play!
            </div>
            <iframe style="width: 100%; height: 200px" src="http://jsfiddle.net/timmywil/efa99/embedded/"></iframe>
            <p>The "strict mode" usage of <code>this</code> goes something like <a target="_blank" href="http://instantrimshot.com/">this</a>.</p>
            <iframe style="width: 100%; height: 200px" src="http://jsfiddle.net/timmywil/efa99/1/embedded/"></iframe>
            <p>Strict mode makes it undefined. In advanced applications using the <code>this</code> keyword, undefined might be more accurate. Keep in mind we probably can't use this yet since strict mode works only in the most modern browsers that support <a href="https://developer.mozilla.org/en/JavaScript/New_in_JavaScript/1.8.5">Javascript 1.8.5</a>. Have fun!</p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              Deep Copying Your Data and Deep Extending Your Objects
            </h1>
            <h5 class='date'>
              2/21/2011
            </h5>
          </header>
          <div class='content'>
            <p>The <a href="http://api.jquery.com/clone">docs for jQuery.clone</a> were recently updated to reflect the way jQuery clones data. I thought this subject could use even more clarification. By default, jQuery copies only the top level of an element's data. That means if you have an array or object within the data object, that will still be a direct reference and when you change one, the other changes with it.</p>
            <p>For a demonstration, see <a target="_blank" href="http://jsfiddle.net/timmywil/uvpPw/4/">http://jsfiddle.net/timmywil/uvpPw/4/</a>. Notice that the alerts will be the same.</p>
            <p>If we don't want that, we can fix this ourselves by creating a new array or object with jQuery.extend. Do not be confused. The words "deep copy" below refer to deep copying data, not doing a deep extend (which in a way is the opposite); that we will discuss afterwards.</p>
            <pre name="code" class="javascript">
            var $elem = $('#elem').data( "arr": [ 1 ] ), // Original element with attached data
                $clone = $elem.clone( true )
                  .data( "arr", $.extend( [], $elem.data("arr") ) ); // Deep copy to prevent data sharing
            </pre>
            <div class='note'>Now see this working: <a target="_blank" href="http://jsfiddle.net/timmywil/uvpPw/3/">http://jsfiddle.net/timmywil/uvpPw/3/</a>. The original button's data is kept intact.</div>
            <h3>
              <i>Deep Extends</i>
            </h3>
            <p>I didn't quite understand what it meant to do a deep extend so I dug through the source and <a target="_blank" href="http://jsfiddle.net/timmywil/dfQS6/">played around a bit</a>. With a deep copy, we want to avoid passing around references so that our original data is not linked with cloned data. With a deep extend, we <i>want</i> our new object to contain <b>direct references</b> to the objects contained in the originals.</p>
            <p>In the demo, you'll notice that only after the deep extend does "littleObj" get updated whenever our new extended object is updated. This is very useful for updating data that may be outside the scope of a particular function you are working in, linking data for events, or writing your very own data link plugin. <span class="smile">=)</span></p>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              jQuery.swap
            </h1>
            <h5 class='date'>
              2/19/2011
            </h5>
          </header>
          <div class='content'>
            <p>
              Having recently delved into the deeper tunnels of the css component of the jQuery source, I had discovered a surprisingly useful internal jQuery function that may be of use to you: jQuery.swap. I&#8217;m sure we&#8217;ve all encountered issues retrieving consistent cross-browser css values with javascript.  I have written this function dozens of times and not realized that it was already in jQuery.
            </p>
            <div class='note'>
              jQuery.swap's paramaters are an element, css properties in an object literal, and a callback function. It swaps the styles of the element you pass with the given css, calls your callback, then returns the element to its original style.<br>
              Check out the source for <a target="_blank" href="http://bot-t.com/jquery.js#5779">swap</a>.
            </div>
            <p>
              To demonstrate, I wrote a lightbox plugin for a site and needed to calculate it&#8217;s final position when opened. It does a flip css3 animation while expanding from a given point. I attach the necessary html for the lightbox given certain parameters on what content it should pull in and which element (an anchor) will be clicked to open it.  The lightbox is inserted after the anchor and by default, the lightbox expands as if out from behind the anchor it is attached to.
            </p>
            <p>
              Having attached the lightbox, I want to allow the user to override it&#8217;s original position in their own css, so in order to retrieve accurate top/left values in Firefox 3, the lightbox could not be hidden or I would consistently get back 0.
            </p>
            <pre name="code" class="javascript">
            var $lightbox = $('#lightbox'),
                top, left;
            // Temporarily swap visibility instead of display: none to get correct top/left in firefox 3
            $.swap($lightbox[0],
              { "display"   : "block",
                "visibility": "hidden" },
              function() {
                top = $lightbox.css('top');
                left = $lightbox.css('left');
              });
            </pre>
          </div>
        </article>
        <article>
          <header class='clearfix'>
            <h1>
              jqWery
            </h1>
            <h5 class='date'>
              10/09/2011
            </h5>
          </header>
          <div class='content'>
            <p>I have prodigious, monstrous respect for selector engines. During the past few weeks, it was an absolute blast digging into <a href="http://sizzlejs.com/">Sizzle</a> and <a href="https://github.com/ded/qwery/">qwery</a>. I underwent an experiment to plug qwery into jQuery and see how far I could get in passing the 430 selector tests that jQuery currently has in its test suite. I have several discoveries and conclusions. In no particular order:</p>
            
            <ul>
            <li>qwery is not a viable selector engine for jQuery (wait, does that mean we're done? no!)</li>
            <li>Sizzle could be a lot faster and I plan on doing a minor overhaul of Sizzle and taking advantage of a few of the performance gems in qwery.</li>
            <li>qwery could be even faster and could learn a few things from Sizzle.</li>
            <li>Sizzle is a freaking beast.</li>
            </ul>
            
            
            <hr />
            
            <h3>Why won't qwery work?</h3>
            
            <p>You might be asking why qwery won't work in jQuery. I was excited to see if it would work, but it is really not realistic.</p>
            
            <ol>
            <li>The chunker cannot handle multiple pseudos or attribute selectors. Supporting this would require a complete rewrite of the engine. qwery tries to split up a selection all at once and passes the parts to the interpret function, which is great but makes it impossible to support multiple pseudos or attrs. This is also explained on qwery's <a href="http://dustindiaz.com/qwery">homepage</a>.</li>
            <li>child selectors require a more complex filter and probably a prefilter in order to do things like :nth-child(2n+1) or :nth-child(-n+6), which qwery cannot do</li>
            <li>qwery would need very similar code to that which Sizzle uses to sort nodes based on document order when selectors contain commas. Currently the selections are simply concat'd.  This makes for quicker selections, but would cause a <em>lot</em> of problems in jQuery (e.g. manipulating the DOM).</li>
            <li>Positional pseudo selectors like :eq or :first require different arguments than a normal pseudo and cannot be done until after the full selection is complete (additionally, as stated before, qwery can only handle one pseudo in a selection)</li>
            <li>Adding support for :not is more involved than it sounds. qwery does not currently support it.</li>
            <li>qwery required a significant amount of restructuring to work with jQuery(although that wasn't terrible) as well as a matchesSelector function to pass at least 50% of the jQuery tests. Until an <a href="https://github.com/ded/qwery/compare/5c51e87303...3c9b387c82">addition that was landed today</a>, there was no way for qwery to do a filter.  You can check out how I expounded on that on <a href="https://github.com/timmywil/qwery/commit/16c98ff0635fcb0205aac917fa575f27c99647ec#L1R309">my branch</a> in order to make it work.</li>
            <li>Sizzle has the advantage of being live-tested about a million times more and can handle a vast number of edge cases without the hard struggle of reorganization. Just as an example, qwery cannot handle any selector that fails in querySelectorAll, even if it fails due to a browser's faulty implementation of querySelectorAll (of which there are quite a few cases). qwery does have a test for css3support, but that is only one of several use cases where querySelectorAll may fail (and misses out on using querySelectorAll in browsers that support it for less complex selectors). Another example is that older versions of Safari cannot handle uppercase values in its querySelectorAll. It will fail without throwing an exception so querySelectorAll should not be used at all in those versions of Safari.</li>
            <li><strong>main point</strong>: qwery would undoubtedly have to look a lot more like Sizzle</li>
            </ol>
            
            
            <blockquote><p>Most of the above is intentionally outside of the scope of qwery; these are just a few of the reasons why qwery would not be feasible in jQuery.</p></blockquote>
            
            <hr />
            
            <h3>Future Sizzle enhancements</h3>
            
            <ol>
            <li>Currently, Sizzle rewrites it's main function based on the presence of querySelectorAll. This duplicates code and inconsistently optimizes for tags, ids, and classes in one, but not the other.  We can fix this by doing something similar to qwery.  Always optimize for tag, id, and possibly body, then call a select function that is querySelectorAll-dependent.  This will speed up Sizzle and clean up some duplicate code in not only Sizzle, but also in jQuery's init function.</li>
            <li>Sizzle has an internal object called <code>Expr</code> with a ton of stuff on it. We should clean up internal references in order to.skip.the.vast.number.of.property.accesses.  A minor optimization, but it should speed things up a bit.</li>
            <li>When creating <a href="https://github.com/timmywil/minimal">minimal</a>, I learned that it is not worth it to have a <code>makeArray</code> function that attempts to use <code>Array.prototype.slice</code> on nodes then provides a fallback.  The simple <a href="https://github.com/timmywil/qwery/blob/jquery/src/qwery.js#L106">array function</a> is actually faster in all browsers.</li>
            <li>Other code reductions and performance enhancements thanks to ideas from qwery's interpreter, caching system, and regex creation.</li>
            </ol>
            
            
            <hr />
            
            <h3>Some suggestions for qwery</h3>
            
            <ol>
            <li>There is no need to have the cache Object with a getter and setter on a prototype. Save the function calls and simply use <a href="https://github.com/timmywil/qwery/blob/16c98ff0635fcb0205aac917fa575f27c99647ec/src/qwery.js#L243">plain objects for your caches</a>.</li>
            <li>Don't use an attrCache. qwery will get <a href="http://jsperf.com/sizzle-attr-vs-qwery-attr">better performance</a> with a <a href="https://github.com/timmywil/qwery/blob/16c98ff0635fcb0205aac917fa575f27c99647ec/src/qwery.js#L153">ternary</a> even when the regex has been cached. There are many things faster than a regex test so keep in mind the equivalent possibilities.</li>
            <li>Similar to attrCache, <a href="https://github.com/timmywil/qwery/blob/16c98ff0635fcb0205aac917fa575f27c99647ec/src/qwery.js#L190">string concatenation + indexOf</a> for testing classes is faster than regex testing even when cached.</li>
            <li>Consider catching the DOM exceptions on querySelectorAll(which are never descriptive), attempting the selection, then giving the user an idea of what went wrong. See the <a href="https://github.com/timmywil/qwery/blob/16c98ff0635fcb0205aac917fa575f27c99647ec/src/qwery.js#L470">select changes</a> and <a href="https://github.com/timmywil/qwery/blob/16c98ff0635fcb0205aac917fa575f27c99647ec/src/qwery.js#L202">an example of using a qwery.error</a>.  You'll find this will not only give your user an indication of what funny selection was passed, but actually fix many selector bugs across browsers for free (no need for the css3support test anymore either). <span class="smile">;)</span></li>
            </ol>
          </div>
        </article>
        <img alt='Timmy' height='442' id='me' src='/images/timmy.png' width='150' />
        <a class='scrolling gradient link-back-to-top' href='#'>Back To Top (^.^)</a>
      </section>
      <section id='sidebar'>
        <a href='https://developer.mozilla.org/en/JavaScript/Guide' title='How To Learn JS'>
          <img alt='How To Learn JS' height='280' src='http://static.jsconf.us/promotejsv.gif' width='160' />
        </a>
      </section>
    <footer id='footer'>
      <p>
        copyright &copy; 2011 timmy willison | <a href="/licence/">licence</a>
      </p>
    </footer>
  </div>
  <!-- end of container -->
  <script src='//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'></script>
  <script type='text/javascript'>
    //<![CDATA[
      !window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.6.1.min.js"%3E%3C/script%3E'));
    //]]>
  </script>
  <script src='/js/plugins.js' type='text/javascript'></script>
  <script src='/js/script.js' type='text/javascript'></script>
  
  <!--[if lt IE 7 ]>
    <script src="/js/libs/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
  <![endif]-->
  <!-- asynchronous google analytics -->
  <script type='text/javascript'>
    //<![CDATA[
      var _gaq = [['_setAccount', 'UA-15918109-1'], ['_trackPageview']];
      (function(d, t) {
       var g = d.createElement(t),
      		 s = d.getElementsByTagName(t)[0];
       g.async = true;
       g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       s.parentNode.insertBefore(g, s);
      })(document, 'script');
    //]]>
  </script>
  
</body>
</html>
